@@__om_included_file_here(examples/test-lib.oasm)
.include_guard(__test_lib__oasm__)

//$.static_lib(test)
//-L option for lib include paths
//lib-test.oslib
// -sl test  -> will search for a file called libtest.oslib,
//				in current working dir or in any of the lib include paths
//				and will append the code to the end
//				It will also add the load code for the lib, inside the
//				inside the load code of the script using the library
//
//				--make-static-lib, -SL option to compile as lib

//$.extern(sub-routine, test::__test_function, 0x007D)
//call,  Const_Const,  test::__test_function,  0

.data = reserve(__test_str_1, __test_str_2, __test_str_3)
.data = load_string(__test_str_1, "Hello World From Function-1!!")
.data = load_string(__test_str_2, "Hello World From Function-2 uuuhuuu!!")
.data = load_string(__test_str_3, "Hello World From Function-3 HEY!!")

$.export(RESERVE, __test_str_1)
$.export(RESERVE, __test_str_2)
$.export(SUB-ROUTINE, __test_function_1)
$.export(SUB-ROUTINE, __test_function_2)
$.export(SUB-ROUTINE, __test_function_3)

.def TEST_DEF 0xABFA
.alias TEST_ALIAS = 0x8998

:__test_function_1:
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_1
cmd, Const_Const, PrintNewLineToConsole, 0
cmd, Const_Const, PrintNewLineToConsole, 0
ret,	Single_Const,	0

:__test_function_2:
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_2
cmd, Const_Const, PrintNewLineToConsole, 0
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_2
cmd, Const_Const, PrintNewLineToConsole, 0
cmd, Const_Const, PrintNewLineToConsole, 0
ret,	Single_Const,	0

:__test_function_3:
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_3
cmd, Const_Const, PrintNewLineToConsole, 0
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_3
cmd, Const_Const, PrintNewLineToConsole, 0
cmd,	Const_Addr,		PrintStringToConsole,	__test_str_3
cmd, Const_Const, PrintNewLineToConsole, 0
cmd, Const_Const, PrintNewLineToConsole, 0
ret,	Single_Const,	0
//End __test_function



.close_include_guard
@@__om_end_included_file_here
:__init__:
reserve,  Single_Const,  0x0003
lda_str,                    0x4865,0x6C6C,0x6F20,0x576F,0x726C,0x6420,0x4672,0x6F6D,0x2046,0x756E,0x6374,0x696F,0x6E2D,0x3121,0x2100
mem,     Addr_Reg,    __test_str_1,    R31
lda_str,                    0x4865,0x6C6C,0x6F20,0x576F,0x726C,0x6420,0x4672,0x6F6D,0x2046,0x756E,0x6374,0x696F,0x6E2D,0x3220,0x7575,0x7568,0x7575,0x7521,0x2100
mem,     Addr_Reg,    __test_str_2,    R31
lda_str,                    0x4865,0x6C6C,0x6F20,0x576F,0x726C,0x6420,0x4672,0x6F6D,0x2046,0x756E,0x6374,0x696F,0x6E2D,0x3320,0x4845,0x5921,0x2100
mem,     Addr_Reg,    __test_str_3,    R31
ret, Const_Const, 0
