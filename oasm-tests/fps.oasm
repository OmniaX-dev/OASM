.include_guard(fps_oasm)

.include [oasm-tests/std/timing.oasm]

.command(request, all=32)
.data = reserve(fps, delta, time1, time2, str)
.data = load_string(str, "ms - Update")

:update:
	cmd,		Const_Addr,			PrintIntToConsole,		time2
	cmd,		Const_Addr,			PrintStringToConsole,	str
	cmd,		Const_Const,		PrintNewLineToConsole,	0
	ret,		Single_Const,		0
//end update

:__main__:
	@SetFPS(10)

	:loop:
		@CurrentTime(time1)
		call,		Const_Const,		update,					0
		@CurrentTime(time2)
		no_op
		@WaitForFrame(time1, time2)

	jmp,		Single_Const,		JMP_UNCONDITIONAL,		loop
	//end loop
	
	ret,		Single_Const,		0x1234
//end __main__

.close_include_guard