.include_guard(__array__oasm__)

.command(request, all=128)

.include [oasm-tests/std/sysinfo.oasm]

.alias ARRAY_SIZE = 20

.data = reserve(hello_world_str, index, arr_ptr, gb_world_str)
.data = load_string(hello_world_str, "Hello World!!")
.data = array(test_array, #ARRAY_SIZE)
.data = load_string(gb_world_str, "Goodbye World!!")

:__main__:
	cmd,		Const_Addr,			PrintStringToConsole,		hello_world_str
	cmd,		Const_Const,		PrintNewLineToConsole,		0

	@Load(%test_array[0], 255)
	@Load(%test_array[4], 255)
	@Load(%test_array[5], 255)
	@Load(%test_array[19], 255)
	@Load(%test_array[15], 255)
	
	@Load(index, 0)

	:loop:
		@ArrayAt(%test_array, index, arr_ptr)

		cmd,	Const_Ptr,		PrintIntToConsole,		arr_ptr
		cmd,	Const_Const,	PrintNewLineToConsole,	0
		inc,	Single_Addr,	index
		cmp,	Addr_Const,		index,					#ARRAY_SIZE
	jmp,	Single_Const,	JMP_LESS,				loop
	//end loop

	cmd,		Const_Addr,			PrintStringToConsole,		gb_world_str
	cmd,		Const_Const,		PrintNewLineToConsole,		0

	ret,		Single_Const,		0
//End __main__

.close_include_guard